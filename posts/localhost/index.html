<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Ubuntu - настройка виртуальных хостов</title><meta name="description" content="Blog about frontend development, travels and life in the Netherlands"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website"><meta property="og:title" content="Ubuntu - настройка виртуальных хостов"><meta property="og:description" content="Для настройки виртуальных хостов необходимо проделать несколько операций. Настраивала я все это счастье под Ubuntu 12.10. Так как сайт на php пришлось поставить соответствующие инструменты. Откройте терминал."><meta property="og:url" content="https://kweyjibo.com/posts/localhost/"><link href="/assets/styles/extensions/prism.css" rel="stylesheet"><link href="/assets/styles/style.css" rel="stylesheet"><link rel="preload" href="/assets/fonts/FiraCode-Regular.woff2" crossorigin as="font" type="font/woff2"><link rel="preload" href="/assets/fonts/FiraCode-SemiBold.woff2" crossorigin as="font" type="font/woff2"><link rel="preload" href="/assets/fonts/roboto-medium-webfont.woff2" crossorigin as="font" type="font/woff2"><link rel="preload" href="/assets/fonts/roboto-regular-webfont.woff2" crossorigin as="font" type="font/woff2"><link rel="icon" href="/assets/img/favicon/favicon.ico" sizes="any"><link rel="icon" href="/assets/img/favicon/any.svg" type="image/svg+xml"><link rel="apple-touch-icon" href="/assets/img/favicon/180.png"><link rel="manifest" href="/manifest.json"><script async src="https://www.googletagmanager.com/gtag/js?id=G-6V7R5PS0HC"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "G-6V7R5PS0HC", { anonymize_ip: true });</script></head><body><header class="header flex" id="header"><div class="wrapper position"><a class="header-logo" href="/" aria-label="Home"><img src="/assets/img/logo.svg" width="110" height="110" alt="Logo"><div class="logo-eye __left"><span class="logo__i __1"></span> <span class="logo__i __2"></span> <span class="logo__i __3"></span> <span class="logo__i __4"></span> <span class="logo__i __5"></span> <span class="logo__i __6"></span> <span class="logo__i __7"></span> <span class="logo__i __8"></span></div><div class="logo-eye __right"><span class="logo__i __1"></span> <span class="logo__i __2"></span> <span class="logo__i __3"></span> <span class="logo__i __4"></span> <span class="logo__i __5"></span> <span class="logo__i __6"></span> <span class="logo__i __7"></span> <span class="logo__i __8"></span></div><div class="logo-mouth"><span class="logo__i __m1"></span> <span class="logo__i __m2"></span> <span class="logo__i __m3"></span> <span class="logo__i __m4"></span> <span class="logo__i __m5"></span></div></a><div class="header-title_tx">With <span class="header-title_o">love</span> to all citizens of <span class="header-title_g">Earth</span></div><div class="navigation-cnt"><nav class="navigation" id="navigation" aria-label="Primary"><ul class="navigation-list"><li class="navigation-i"><a class="navigation-link" href="/">Home</a></li><li class="navigation-i"><a class="navigation-link" href="/tags/">Tags</a></li><li class="navigation-i"><a class="navigation-link" href="/about/">About</a></li></ul></nav><div><a href="/index.xml" title="RSS Feed" class="rss-feed"><img src="/assets/img/icons/rss_feed_32.svg" width="32" height="32" class="rss-feed-icon" alt="RSS Feed"></a></div></div><span id="toggleDarkMode"></span><div class="decor-dots __header"></div></div></header><main class="main flex"><div class="wrapper"><article class="article"><header class="article-header"><h1 class="article-title">Ubuntu - настройка виртуальных хостов</h1><time class="article-date" datetime="Fri Nov 23 2012 01:00:00 GMT+0100 (Central European Standard Time)">November 23, 2012</time><div class="tags"><span class="tag_i"><a href="/tags/ubuntu" class="tag_lk">ubuntu </a></span><span class="tag_i"><a href="/tags/localhost" class="tag_lk">localhost</a></span></div><div class="view-count" id="view-count"><img src="/assets/img/view.svg" width="24" height="24"></div></header><section class="article-content"><p>Итак, приступим.</p><p>Для настройки виртуальных хостов необходимо проделать несколько операций. Настраивала я все это счастье под Ubuntu 12.10. Так как сайт на php, пришлось поставить соответствующие инструменты. Откройте терминал.</p><p>Для начала устанавливаем Apache. В окне терминала введите строку:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">sudo apt-get install apache2</span></code></pre><p>Теперь установим PHP:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">sudo apt-get install php5 php5-mysql libapache2-mod-php5</span></code></pre><p>Перезагрузите Apache-сервер, чтобы загрузить php-модули:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">sudo service apache2 restart</span></code></pre><p>Для проверки статуса сервиса, его старта, остановки, рестарта или перезагрузки конфигурационных файлов используются следующие команды:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">service apache2 status</span>
<span class="highlight-line">sudo service apache2 start</span>
<span class="highlight-line">sudo service apache2 stop</span>
<span class="highlight-line">sudo service apache2 restart</span>
<span class="highlight-line">sudo service apache2 reload</span></code></pre><p>Файл конфигурации Apache хранится по адресу <code>/ect/apache2/apache2.conf</code>. Проверьте его обязательно. У меня была закомментирована строчка <code>Include sites-enabled/</code>, в следствии чего не получалось запустить созданный хост из нужного каталога.</p><p>В браузере наберите адрес <code>http://localhost</code>. Если все хорошо, то должна появится надпись <strong>"It works!"</strong>. Эта надпись выводится из файла <code>/var/www/index.html</code>. Можете отредактировать его и убедиться, что все правильно.</p><p>Теперь можно приступить к настройке хоста. Я захотела для начала установить у себя фреймворк Symfony2. Создала в домашнем каталоге папку <code>website</code>, а в ней <code>symfony</code>. Путь к такой папке:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">/home/User/website/symfony</span></code></pre><p>Он нам понадобится для конфигурационных файлов. <strong>User</strong> - это ваше имя в системе (пользователь/логин). Затем закачала туда файлы. И теперь мне нужно, чтобы по ссылке <code>symfony.me</code> открывалось окно с приветствием данного фреймворка.</p><p>Зайдем в папку <code>/etc/apache2</code>:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">cd /etc/apache2</span>
<span class="highlight-line">ls</span></code></pre><p>Командой <code>ls</code> посмотрите, что находится в данной директории. Нас интересуют два каталога — <code>sites-available</code> и <code>sites-enabled</code>. В папке <code>sites-available</code> хранится информация о существующих хостах, а в папке <code>sites-enabled</code> о подключенных, причем файлы в ней являются символическими ссылками на файлы из папки <code>sites-available</code></p><h4>Шаг 1</h4><p>Создадим в каталоге <code>sites-available</code> файл <code>symfony.me</code> (к слову, назвать его можно как угодно, но так просто легче не запутаться) и откроем его для редактирования.</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">sudo gedit /etc/apache2/sites-available/symfony.me</span></code></pre><p>Откроется пустой файл. Можете скопировать в него полностью содержимое файла <code>/etc/apache2/sites-available/default</code> (отрыть для чтения его можно просто двойным кликом, зайдя в эту папку):</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">	&lt;VirtualHost *:80></span>
<span class="highlight-line">		ServerAdmin webmaster@symfony.me</span>
<span class="highlight-line">					ServerName symfony.me</span>
<span class="highlight-line">		DocumentRoot /home/user/website/symfony</span>
<span class="highlight-line">		&lt;Directory></span>
<span class="highlight-line">			Options FollowSymLinks</span>
<span class="highlight-line">			AllowOverride None</span>
<span class="highlight-line">		&lt;/Directory></span>
<span class="highlight-line">		&lt;Directory /home/user/website/symfony></span>
<span class="highlight-line">			Options Indexes FollowSymLinks MultiViews</span>
<span class="highlight-line">			AllowOverride All</span>
<span class="highlight-line">			Order allow,deny</span>
<span class="highlight-line">			allow from all</span>
<span class="highlight-line">		&lt;/Directory></span>
<span class="highlight-line">		ErrorLog /var/log/apache2/error.log</span>
<span class="highlight-line">		LogLevel debug</span>
<span class="highlight-line">		CustomLog /var/log/apache2/access.log combined</span>
<span class="highlight-line">	&lt;/VirtualHost></span></code></pre><p>Внесем некоторые изменения: отредактируйте <code>ServerName</code>:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">ServerName symfony.me</span></code></pre><p>Заменим адрес директории <code>DocumentRoot</code> на свою:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">DocumentRoot /home/user/website/symfony</span></code></pre><p>Изменим строчку <code>Directory /var/www/</code>:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">Directory /home/user/website/symfony</span></code></pre><p>И изменим значение <code>AllowOverride None</code> на:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">AllowOverride All</span></code></pre><h4>Шаг 2</h4><p>Теперь отредактируем файл <code>hosts</code>:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">sudo gedit /etc/hosts</span>
<span class="highlight-line">terminal</span></code></pre><p>У меня он выглядит так:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">127.0.0.1 localhost.localdomain localhost HOME-SP</span>
<span class="highlight-line">127.0.0.1 symfony.me </span>
<span class="highlight-line"></span>
<span class="highlight-line"># The following lines are desirable for IPv6 capable hosts</span>
<span class="highlight-line">::1 ip6-localhost ip6-loopback</span>
<span class="highlight-line">fe00::0 ip6-localnet</span>
<span class="highlight-line">ff00::0 ip6-mcastprefix</span>
<span class="highlight-line">ff02::1 ip6-allnodes</span>
<span class="highlight-line">ff02::2 ip6-allrouters</span></code></pre><p>Вам нужно добавить строчку:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">127.0.0.1 symfony.me</span></code></pre><h4>Шаг 3</h4><p>Теперь включим наш сайт</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">sudo a2ensite symfony.me</span></code></pre><p>Чтобы выключить сайт</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">sudo a2dissite symfony.me</span></code></pre><h4>Шаг 4</h4><p>Перезагружаем Apache</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">sudo service apache2 restart</span></code></pre><p>Идем в браузер и в набираем адрес хоста, в моем случае это <code>symfony.me/web/app_dev.php</code>. У меня конечно не с первого раза вышло. Это уже вопрос фреймворка. В <code>php.ini</code> пришлось отредактировать строчку <code>date.timezone</code>:</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">sudo gedit /etc/php5/apache2/php.ini</span></code></pre><p>Раскомментировать и прописать <code>Europe/Moscow</code>.</p><pre class="language-terminal"><code class="language-terminal"><span class="highlight-line">date.timezone = Europe/Moscow</span></code></pre></section><script>var remark_config = {
    host: "https://remark.kweyjibo.com",
    site_id: "kweyjibo",
  };</script><script>!(function (e, n) {
    for (var o = 0; o < e.length; o++) {
      var r = n.createElement("script"),
        c = ".js",
        d = n.head || n.body;
      "noModule" in r ? ((r.type = "module"), (c = ".mjs")) : (r.async = !0),
        (r.defer = !0),
        (r.src = remark_config.host + "/web/" + e[o] + c),
        d.appendChild(r);
    }
  })(remark_config.components || ["embed"], document);</script><div id="remark42"></div></article></div></main><footer class="footer flex"><div class="wrapper"><div class="column __wide"><div class="footer-aboutme"><span class="footer-aboutme_name"><img src="/assets/img/ic-me.svg" alt="User icon" width="24" height="24" class="footer-aboutme_ic"> Alla Dolzhenko</span></div><div class="footer-me_dsc">Frontend developer, illustrator, photographer & cat lover</div></div><div class="column"><div class="social-cnt"><a href="https://github.com/kweyjibo" class="footer-social_link"><svg width="21" height="20" aria-hidden="true" class="footer-social_ic"><use href="/assets/img/social/icons.svg#github"/></svg> </a><a href="https://www.linkedin.com/in/alla-dolzhenko/" class="footer-social_link"><svg width="24" height="24" aria-hidden="true" class="footer-social_ic"><use href="/assets/img/social/icons.svg#iconin"/></svg> </a><a href="mailto:kweyjibo@gmail.com" class="footer-social_link"><svg width="23" height="17" aria-hidden="true" class="footer-social_ic"><use href="/assets/img/social/icons.svg#email"/></svg></a></div></div></div></footer><script src="/assets/scripts/view.js"></script></body></html>